flows:
- name: login
  description: Complete login flow with verification
  steps:
  - description: Wait for page to fully load
    duration: 5000
    type: wait
  - description: Wait for username field
    selector: 'input[name="username"], input[type="text"], #username, input[placeholder*="username"],
      input[placeholder*="Username"]'
    timeout: 15000
    type: wait_for_selector
  - description: Fill username field
    selector: 'input[name="username"], input[type="text"], #username, input[placeholder*="username"],
      input[placeholder*="Username"]'
    type: fill
    value: admin
  - description: Wait for password field
    selector: 'input[name="password"], input[type="password"], #password'
    timeout: 5000
    type: wait_for_selector
  - description: Fill password field
    selector: 'input[name="password"], input[type="password"], #password'
    type: fill
    value: password
  - description: Wait for login button to be ready
    selector: button[type="submit"], input[type="submit"], .btn-primary, .login-button,
      button:has-text("Login"), button:has-text("Sign in"), button.button
    timeout: 5000
    type: wait_for_selector
  - description: Click login button
    selector: button[type="submit"], input[type="submit"], .btn-primary, .login-button,
      button:has-text("Login"), button:has-text("Sign in"), button.button
    type: click
  - description: Wait for login to process
    duration: 5000
    type: wait
  - contains: true
    description: Verify redirected to tasks route
    type: verify_url
    url: /
  - description: Verify navigation frame is present
    selector: nav, .navbar, .sidebar, [data-cy="navigation"], [class*="navigation"],
      [class*="sidebar"]
    type: verify
    verify_type: element_exists
  - description: Verify key nav links exist
    selector: a[href*="/projects"], a[href*="/lists"], a[href*="/tasks"], [data-cy*="project"],
      [data-cy*="list"]
    type: verify
    verify_type: element_exists
  - contains: true
    description: Verify page title indicates Vikunja
    title: Vikunja
    type: verify
    verify_type: page_title
- name: incorrect_login
  description: Verify login fails with incorrect password
  steps:
  - description: Wait for page to fully load
    duration: 5000
    type: wait
  - description: Wait for username field
    selector: 'input[name="username"], input[type="text"], #username, input[placeholder*="username"],
      input[placeholder*="Username"]'
    timeout: 15000
    type: wait_for_selector
  - description: Fill username field
    selector: 'input[name="username"], input[type="text"], #username, input[placeholder*="username"],
      input[placeholder*="Username"]'
    type: fill
    value: admin
  - description: Wait for password field
    selector: 'input[name="password"], input[type="password"], #password'
    timeout: 5000
    type: wait_for_selector
  - description: Fill password field with incorrect password
    selector: 'input[name="password"], input[type="password"], #password'
    type: fill
    value: wrongpassword
  - description: Wait for login button to be ready
    selector: button[type="submit"], input[type="submit"], .btn-primary, .login-button,
      button:has-text("Login"), button:has-text("Sign in"), button.button
    timeout: 5000
    type: wait_for_selector
  - description: Click login button
    selector: button[type="submit"], input[type="submit"], .btn-primary, .login-button,
      button:has-text("Login"), button:has-text("Sign in"), button.button
    type: click
  - description: Wait for login attempt to process
    duration: 3000
    type: wait
  - description: Verify error message is displayed
    selector: .error, .alert-danger, .alert-error, [role="alert"], .message.negative,
      .notification.is-danger, .notification.is-error, [class*="error"], [class*="danger"]
    type: verify
    verify_type: element_exists
