flows:
- name: login
  description: Login flow for WebArena CMS (Magento 2 Admin) with comprehensive verification
  steps:
  - description: Navigate to Magento admin login page
    timeout: 30000
    type: navigate
    url: /admin
  - description: Wait for page to fully load
    duration: 3000
    type: wait
  - description: Wait for username field to be available
    selector: input[name="login[username]"], input#username, input[name="username"],
      input#email
    timeout: 15000
    type: wait_for_selector
  - description: Verify username field is visible
    selector: input[name="login[username]"], input#username, input[name="username"]
    type: verify
    verify_type: element_exists
  - description: Enter admin username
    selector: input[name="login[username]"], input#username, input[name="username"]
    type: fill
    value: admin
  - description: Wait for password field
    selector: input[name="login[password]"], input#password, input[name="password"],
      input[type="password"]
    timeout: 5000
    type: wait_for_selector
  - description: Verify password field is visible
    selector: input[name="login[password]"], input#password, input[name="password"],
      input[type="password"]
    type: verify
    verify_type: element_exists
  - description: Enter admin password
    selector: input[name="login[password]"], input#password, input[name="password"],
      input[type="password"]
    type: fill
    value: admin1234
  - description: Brief pause before clicking login
    duration: 1000
    type: wait
  - description: Click Sign In button
    selector: button.action-login, button[type="submit"], button.action-primary, .actions
      .action-primary
    timeout: 10000
    type: click
  - description: Wait for login processing and dashboard loading
    duration: 8000
    type: wait
  - contains: true
    description: Verify redirected to admin dashboard URL
    timeout: 15000
    type: verify_url
    url: /admin/admin/dashboard
  - description: Verify no login errors displayed
    error_selectors:
    - .message-error
    - .error
    - .alert-danger
    - .message.message-error
    - .messages .message-error
    type: verify_no_errors
  - description: Wait for admin navigation menu
    selector: .page-header, .admin__menu, .menu-wrapper, nav.admin__menu
    timeout: 15000
    type: wait_for_selector
  - description: Verify admin menu is present (authenticated state)
    selector: .admin__menu, nav.admin__menu, .menu-wrapper
    type: verify
    verify_type: element_exists
  - description: Verify user account dropdown is present
    selector: .admin-user, .account-dropdown, .admin__action-dropdown, [data-bind*="username"]
    type: verify
    verify_type: element_exists
  - description: Verify page title contains Dashboard
    text: Dashboard
    type: verify_text
  - description: Verify dashboard main content is visible
    selector: .dashboard-container, .dashboard-main, .dashboard-diagram-container,
      .dashboard-diagram, .dashboard-advanced-reports
    type: verify
    verify_type: element_exists
