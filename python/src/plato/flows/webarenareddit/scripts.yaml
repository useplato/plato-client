flows:
- name: login
  description: Login flow for WebArena Reddit (Postmill) with verification
  steps:
  - description: Navigate directly to login page
    type: navigate
    url: /login
  - description: Wait for page to fully load
    duration: 3000
    type: wait
  - description: Wait for username field
    selector: input[name="username"], input#username, input[type="text"]
    timeout: 15000
    type: wait_for_selector
  - description: Fill username field
    selector: input[name="username"], input#username, input[type="text"]
    type: fill
    value: MarvelsGrantMan136
  - description: Wait for password field
    selector: input[name="password"], input#password, input[type="password"]
    timeout: 10000
    type: wait_for_selector
  - description: Fill password field
    selector: input[name="password"], input#password, input[type="password"]
    type: fill
    value: test1234
  - description: Wait for login submit button
    selector: button[type="submit"], input[type="submit"], button:has-text("Log in"),
      button:has-text("Login"), button:has-text("Sign in")
    timeout: 15000
    type: wait_for_selector
  - description: Click login submit button
    selector: button[type="submit"], input[type="submit"], button:has-text("Log in"),
      button:has-text("Login"), button:has-text("Sign in")
    type: click
  - description: Wait for login to process and redirect
    duration: 6000
    type: wait
  - description: Verify no login errors are displayed
    error_selectors:
    - .alert-danger
    - .alert-error
    - .error
    - .invalid-feedback
    - '[role="alert"]'
    type: verify_no_errors
  - contains: true
    description: Verify redirected to home/front page
    type: verify_url
    url: /
  - description: Verify authenticated UI indicators present
    selector: a[href*="/logout"], a[href*="/submit"], a[href*="/me"], .user, .navbar
      a[href*="/new"], a[href*="/inbox"]
    type: verify
    verify_type: element_exists
  - contains: true
    description: Verify page title indicates Postmill
    title: Postmill
    type: verify
    verify_type: page_title
