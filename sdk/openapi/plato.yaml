openapi: 3.0.0
info:
  title: Plato API
  version: 1.0.0
  description: API for Plato platform - SDK routes only

security:
  - ApiKeyAuth: []

paths:
  /env/make2:
    post:
      tags:
        - env
      summary: Make Env
      operationId: make_env_api_env_make2_post
      parameters:
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MakeEnvRequest2"
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MakeEnvResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/session/{session_id}/evaluate:
    post:
      tags:
        - env
      summary: Evaluate Session
      description: Evaluate the session.
      operationId: evaluate_session_api_env_session__session_id__evaluate_post
      parameters:
        -
          name: session_id
          in: path
          required: true
          schema:
            type: string
            title: Session Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      requestBody:
        content:
          application/json:
            schema:
              anyOf:
                -
                  $ref: "#/components/schemas/EvaluateRequest"
                -
                  type: "null"
              title: Request
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EvaluateResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/session/{session_id}/score:
    post:
      tags:
        - env
      summary: Score Env
      description: Score the environment.
      operationId: score_env_api_env_session__session_id__score_post
      parameters:
        -
          name: session_id
          in: path
          required: true
          schema:
            type: string
            title: Session Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ScoreRequest"
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ScoreResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/simulators:
    get:
      tags:
        - env
      summary: Get Simulators
      description: Get all simulators with optimized queries.
      operationId: get_simulators_api_env_simulators_get
      parameters:
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/app__schemas__gitea_responses__SimulatorListItemResponse"
                title: Response Get Simulators Api Env Simulators Get
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
    post:
      tags:
        - env
      summary: Create Simulator
      description: Create a new simulator.
      operationId: create_simulator_api_env_simulators_post
      parameters:
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateSimulatorRequest"
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SimulatorResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/{job_group_id}/active_session:
    get:
      tags:
        - env
      summary: Get Active Session
      description: Get the active session for a job group.
      operationId: get_active_session_api_env__job_group_id__active_session_get
      parameters:
        -
          name: job_group_id
          in: path
          required: true
          schema:
            type: string
            title: Job Group Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ActiveSessionResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/{job_group_id}/backup:
    post:
      tags:
        - env
      summary: Backup Env
      description: Create a backup of the environment.
      operationId: backup_env_api_env__job_group_id__backup_post
      parameters:
        -
          name: job_group_id
          in: path
          required: true
          schema:
            type: string
            title: Job Group Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BackupEnvResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/{job_group_id}/cdp_url:
    get:
      tags:
        - env
      summary: Get Cdp Url
      description: Get the CDP URL for the environment.
      operationId: get_cdp_url_api_env__job_group_id__cdp_url_get
      parameters:
        -
          name: job_group_id
          in: path
          required: true
          schema:
            type: string
            title: Job Group Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CdpUrlResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/{job_group_id}/close:
    post:
      tags:
        - env
      summary: Close Env
      operationId: close_env_api_env__job_group_id__close_post
      parameters:
        -
          name: job_group_id
          in: path
          required: true
          schema:
            type: string
            title: Job Group Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CloseEnvResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/{job_group_id}/proxy_url:
    get:
      tags:
        - env
      summary: Get Proxy Url
      description: Get the public URL for the environment.
      operationId: get_proxy_url_api_env__job_group_id__proxy_url_get
      parameters:
        -
          name: job_group_id
          in: path
          required: true
          schema:
            type: string
            title: Job Group Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProxyUrlResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/{job_group_id}/reset:
    post:
      tags:
        - env
      summary: Reset Env
      description: Reset the environment with an optional task.
      operationId: reset_env_api_env__job_group_id__reset_post
      parameters:
        -
          name: job_group_id
          in: path
          required: true
          schema:
            type: string
            title: Job Group Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResetEnvRequest"
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResetEnvResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/{job_group_id}/state:
    get:
      tags:
        - env
      summary: Get Env State
      operationId: get_env_state_api_env__job_group_id__state_get
      parameters:
        -
          name: job_group_id
          in: path
          required: true
          schema:
            type: string
            title: Job Group Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EnvStateResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/{job_group_id}/status:
    get:
      tags:
        - env
      summary: Get Job Status
      operationId: get_job_status_api_env__job_group_id__status_get
      parameters:
        -
          name: job_group_id
          in: path
          required: true
          schema:
            type: string
            title: Job Group Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JobStatusResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/{job_id}/heartbeat:
    post:
      tags:
        - env
      summary: Send Heartbeat
      description: Send a heartbeat to keep the environment session alive.
      operationId: send_heartbeat_api_env__job_id__heartbeat_post
      parameters:
        -
          name: job_id
          in: path
          required: true
          schema:
            type: string
            title: Job Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HeartbeatResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/{job_id}/worker_ready:
    get:
      tags:
        - env
      summary: Get Worker Ready
      description: |
        Check if the workers for this job group are ready and healthy.
        
        Uses the persistent job ready notification service to wait for job readiness.
        Falls back to checking Redis if notification not received (in case we missed it).
        Raises 500 if job not ready after all checks.
      operationId: get_worker_ready_api_env__job_id__worker_ready_get
      parameters:
        -
          name: job_id
          in: path
          required: true
          schema:
            type: string
            title: Job Id
        -
          name: timeout
          in: query
          required: false
          schema:
            type: integer
            default: 120
            title: Timeout
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WorkerReadyResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /env/{session_id}/log:
    post:
      tags:
        - env
      summary: Log State Mutation
      description: Log a state mutation or batch of mutations.
      operationId: log_state_mutation_api_env__session_id__log_post
      parameters:
        -
          name: session_id
          in: path
          required: true
          schema:
            type: string
            title: Session Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              anyOf:
                -
                  $ref: "#/components/schemas/BaseStructuredRunLog"
                -
                  $ref: "#/components/schemas/BatchLogRequest"
              title: Log
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LogResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /gitea/credentials:
    get:
      tags:
        - gitea
      summary: Get Gitea Credentials
      description: Get Gitea credentials for the organization
      operationId: get_gitea_credentials
      parameters:
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GiteaCredentialsResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /gitea/my-info:
    get:
      tags:
        - gitea
      summary: Get My Gitea Info
      description: Get the current user's Gitea info (auto-provisions if needed)
      operationId: get_my_gitea_info
      parameters:
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GiteaInfoResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /gitea/simulators:
    get:
      tags:
        - gitea
      summary: Get Accessible Simulators
      description: Get simulators that user has access to view repos for
      operationId: get_accessible_simulators
      parameters:
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/app__schemas__gitea_responses__SimulatorListItemResponse"
                title: Response Get Accessible Simulators
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /gitea/simulators/{simulator_id}/repo:
    get:
      tags:
        - gitea
      summary: Get Simulator Repository
      description: Get repository details for a specific simulator
      operationId: get_simulator_repository
      parameters:
        -
          name: simulator_id
          in: path
          required: true
          schema:
            type: integer
            title: Simulator Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SimulatorRepositoryResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"
    post:
      tags:
        - gitea
      summary: Create Simulator Repository
      description: Create a repository for a simulator (only if it doesn't exist)
      operationId: create_simulator_repository
      parameters:
        -
          name: simulator_id
          in: path
          required: true
          schema:
            type: integer
            title: Simulator Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RepositoryResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /public-build/events/{correlation_id}:
    get:
      tags:
        - public-build
      summary: Get Operation Events
      description: |
        Stream operation results via Server-Sent Events (SSE) for public usage.
        
        Returns a stream of events with the following format:
        - event: Event type (e.g., "connected", "progress", "complete", "error")
        - data: JSON payload with event details
        
        Events:
        - connected: Initial connection established
        - progress: Operation progress update
        - complete: Operation completed successfully
        - error: Operation failed with error details
      operationId: get_operation_events_api_public_build_events__correlation_id__get
      parameters:
        -
          name: correlation_id
          in: path
          required: true
          schema:
            type: string
            title: Correlation Id
      responses:
        200:
          description: Server-Sent Events stream
          content:
            text/event-stream:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    description: Event type
                    enum:
                      - connected
                      - progress
                      - complete
                      - error
                  success:
                    type: boolean
                    description: Whether the operation succeeded
                  message:
                    type: string
                    description: Human-readable message
                  error:
                    type: string
                    description: Error details if failed
                required:
                  - type
              x-fern-streaming:
                format: sse
                stream-type: object
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /public-build/vm/create:
    post:
      tags:
        - public-build
      summary: Create Vm
      operationId: create_vm_api_public_build_vm_create_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateVMRequest"
        required: true
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateVMResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /public-build/vm/{public_id}:
    delete:
      tags:
        - public-build
      summary: Close Vm
      description: Close and terminate a VM.
      operationId: close_vm_api_public_build_vm__public_id__delete
      parameters:
        -
          name: public_id
          in: path
          required: true
          schema:
            type: string
            title: Public Id
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VMManagementResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /public-build/vm/{public_id}/checkpoint:
    post:
      tags:
        - public-build
      summary: Checkpoint Vm
      description: |
        Create a checkpoint snapshot of a VM.
        
        This creates a blockdiff_checkpoint artifact type instead of a regular blockdiff.
        Optional parameters allow overriding artifact labels:
        - service: Simulator name (defaults to job's service)
        - git_hash: Git hash/version (defaults to job's version or "unknown")
        - dataset: Dataset name (defaults to job's dataset)
      operationId: checkpoint_vm_api_public_build_vm__public_id__checkpoint_post
      parameters:
        -
          name: public_id
          in: path
          required: true
          schema:
            type: string
            title: Public Id
      requestBody:
        content:
          application/json:
            schema:
              anyOf:
                -
                  $ref: "#/components/schemas/CreateSnapshotRequest"
                -
                  type: "null"
              title: Request
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateSnapshotResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /public-build/vm/{public_id}/setup-root-access:
    post:
      tags:
        - public-build
      summary: Setup Root Access
      description: Setup SSH key-based authentication for the root user.
      operationId: setup_root_access_api_public_build_vm__public_id__setup_root_access_post
      parameters:
        -
          name: public_id
          in: path
          required: true
          schema:
            type: string
            title: Public Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SetupRootPasswordRequest"
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VMManagementResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /public-build/vm/{public_id}/setup-sandbox:
    post:
      tags:
        - public-build
      summary: Setup Sandbox
      description: Setup sandbox development environment with git clone.
      operationId: setup_sandbox_api_public_build_vm__public_id__setup_sandbox_post
      parameters:
        -
          name: public_id
          in: path
          required: true
          schema:
            type: string
            title: Public Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SetupSandboxRequest"
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SetupSandboxResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /public-build/vm/{public_id}/snapshot:
    post:
      tags:
        - public-build
      summary: Save Vm Snapshot
      description: |
        Save a snapshot of a VM.
        
        Optional parameters allow overriding artifact labels:
        - service: Simulator name (defaults to job's service)
        - git_hash: Git hash/version (defaults to job's version or "unknown")
        - dataset: Dataset name (defaults to job's dataset)
      operationId: save_vm_snapshot_api_public_build_vm__public_id__snapshot_post
      parameters:
        -
          name: public_id
          in: path
          required: true
          schema:
            type: string
            title: Public Id
      requestBody:
        content:
          application/json:
            schema:
              anyOf:
                -
                  $ref: "#/components/schemas/CreateSnapshotRequest"
                -
                  type: "null"
              title: Request
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateSnapshotResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /public-build/vm/{public_id}/start-worker:
    post:
      tags:
        - public-build
      summary: Start Worker
      description: "Start listeners: write env.py and worker compose from dataset config, then restart worker."
      operationId: start_worker_api_public_build_vm__public_id__start_worker_post
      parameters:
        -
          name: public_id
          in: path
          required: true
          schema:
            type: string
            title: Public Id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VMManagementRequest"
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VMManagementResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /simulator/{artifact_id}/db_config:
    get:
      tags:
        - simulator
      summary: Get Db Config
      description: |
        Get database configuration from a simulator artifact's plato config.
        
        Parses the YAML plato_config and extracts the database listener configuration.
        The plato_config contains a single dataset configuration (anchors are already resolved).
      operationId: get_db_config_api_simulator__artifact_id__db_config_get
      parameters:
        -
          name: artifact_id
          in: path
          required: true
          schema:
            type: string
            title: Artifact Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DbConfigResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /simulator/{artifact_id}/flows:
    get:
      tags:
        - simulator
      summary: Get Env Flows
      operationId: get_env_flows_api_simulator__artifact_id__flows_get
      parameters:
        -
          name: artifact_id
          in: path
          required: true
          schema:
            type: string
            title: Artifact Id
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema: {}
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /simulator/{simulator_name}/versions:
    get:
      tags:
        - simulator
      summary: Get Simulator Versions
      description: Get all versions for a specific simulator across all datasets
      operationId: get_simulator_versions_api_simulator__simulator_name__versions_get
      parameters:
        -
          name: simulator_name
          in: path
          required: true
          schema:
            type: string
            title: Simulator Name
        -
          name: include_checkpoints
          in: query
          required: false
          schema:
            type: boolean
            description: Include blockdiff checkpoint artifacts
            default: false
            title: Include Checkpoints
          description: Include blockdiff checkpoint artifacts
        -
          name: authorization
          in: header
          required: false
          schema:
            type: string
            title: Authorization
        -
          name: X-Internal-Service
          in: header
          required: false
          schema:
            type: string
            title: X-Internal-Service
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SimulatorVersionsResponse"
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /testcases:
    get:
      tags:
        - testcases
      summary: Get Testcases
      operationId: get_testcases_api_testcases_get
      parameters:
        -
          name: start_path
          in: query
          required: false
          schema:
            anyOf:
              -
                type: string
              -
                type: "null"
            title: Start Path
        -
          name: test_case_set_ids
          in: query
          required: false
          schema:
            anyOf:
              -
                type: string
              -
                type: "null"
            title: Test Case Set Ids
        -
          name: name
          in: query
          required: false
          schema:
            anyOf:
              -
                type: string
              -
                type: "null"
            title: Name
        -
          name: prompt
          in: query
          required: false
          schema:
            anyOf:
              -
                type: string
              -
                type: "null"
            title: Prompt
        -
          name: mode
          in: query
          required: false
          schema:
            anyOf:
              -
                type: string
              -
                type: "null"
            title: Mode
        -
          name: page
          in: query
          required: false
          schema:
            anyOf:
              -
                type: integer
              -
                type: "null"
            title: Page
        -
          name: page_size
          in: query
          required: false
          schema:
            type: integer
            default: 30
            title: Page Size
        -
          name: simulator_id
          in: query
          required: false
          schema:
            anyOf:
              -
                type: integer
              -
                type: "null"
            title: Simulator Id
        -
          name: simulator_name
          in: query
          required: false
          schema:
            anyOf:
              -
                type: string
              -
                type: "null"
            title: Simulator Name
        -
          name: test_case_public_id
          in: query
          required: false
          schema:
            anyOf:
              -
                type: string
              -
                type: "null"
            title: Test Case Public Id
        -
          name: scoring_config_type
          in: query
          required: false
          schema:
            anyOf:
              -
                type: string
              -
                type: "null"
            title: Scoring Config Type
        -
          name: is_assigned
          in: query
          required: false
          schema:
            anyOf:
              -
                type: boolean
              -
                type: "null"
            title: Is Assigned
        -
          name: is_sample
          in: query
          required: false
          schema:
            anyOf:
              -
                type: boolean
              -
                type: "null"
            title: Is Sample
        -
          name: rejected
          in: query
          required: false
          schema:
            anyOf:
              -
                type: boolean
              -
                type: "null"
            title: Rejected
        -
          name: exclude_assigned_to_annotators
          in: query
          required: false
          schema:
            anyOf:
              -
                type: boolean
              -
                type: "null"
            title: Exclude Assigned To Annotators
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema: {}
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

  /user/organization/running-sessions:
    get:
      tags:
        - user
      summary: Get Organization Running Sessions Endpoint
      description: |
        Get comprehensive session information for the user's organization.
        
        Args:
            last_n_hours: Number of hours to look back for peak calculation (default: 1)
        
        Returns:
            Dictionary containing:
            - running_sessions: Count of currently running sessions
            - pending_sessions: Count of sessions that are not ended but have status != RUN_STARTED
            - peak_running_count: Peak number of running sessions within the past last_n_hours period
      operationId: get_organization_running_sessions_endpoint_api_user_organization_running_sessions_get
      parameters:
        -
          name: last_n_hours
          in: query
          required: false
          schema:
            type: integer
            description: "Number of hours to look back for peak calculation (default: 1)"
            default: 1
            title: Last N Hours
          description: "Number of hours to look back for peak calculation (default: 1)"
      responses:
        200:
          description: Successful Response
          content:
            application/json:
              schema: {}
        422:
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HTTPValidationError"

components:
  schemas:
    ActiveSessionResponse:
      additionalProperties: true
      type: object

    Authentication:
      properties:
        user:
          type: string
          title: User
        password:
          type: string
          title: Password
      type: object
      required:
        - user
        - password
      title: Authentication

    BackupEnvResponse:
      additionalProperties: true
      type: object

    BaseScoringConfig:
      properties:
        type:
          type: string
          enum:
            - offline_step
            - offline_exact_action_match
            - offline_exact_state_match
            - offline_exact_output_match
            - page_action_sequence
            - human_in_the_loop
            - api
            - criteria
            - real_evals_state_check
            - real_evals_response_check
            - composite
            - custom
            - state_mutation_match
            - system_scoring
            - json_schema
          title: Type
      type: object
      required:
        - type
      title: BaseScoringConfig

    BaseStructuredRunLog:
      properties:
        source:
          type: string
          enum:
            - system
            - agent
            - simulator
          title: Source
        type:
          type: string
          enum:
            - info
            - warning
            - error
            - answer
            - action
            - state_mutation
            - ood_request
            - screen_recording_started
          title: Type
        timestamp:
          type: string
          title: Timestamp
          default: "2025-11-13T22:01:29.274924"
      type: object
      title: BaseStructuredRunLog

    BatchLogRequest:
      properties:
        source:
          type: string
          title: Source
        type:
          type: string
          title: Type
        timestamp:
          type: string
          title: Timestamp
        session_id:
          type: string
          title: Session Id
        mutations:
          items:
            $ref: "#/components/schemas/BaseStructuredRunLog"
          type: array
          title: Mutations
        count:
          type: integer
          title: Count
      type: object
      required:
        - source
        - type
        - timestamp
        - session_id
        - mutations
        - count
      title: BatchLogRequest

    CdpUrlResponse:
      additionalProperties: true
      type: object

    ChromeCookie:
      properties:
        name:
          type: string
          title: Name
        value:
          type: string
          title: Value
        domain:
          type: string
          title: Domain
        path:
          type: string
          title: Path
        expires:
          type: integer
          title: Expires
        httpOnly:
          type: boolean
          title: Httponly
        secure:
          type: boolean
          title: Secure
      type: object
      required:
        - name
        - value
        - domain
        - path
        - expires
        - httpOnly
        - secure
      title: ChromeCookie

    CloseEnvResponse:
      additionalProperties: true
      type: object

    CreateSimulatorRequest:
      properties:
        name:
          type: string
          title: Name
        url:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Url
        description:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Description
        imgUrl:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Imgurl
        config:
          $ref: "#/components/schemas/SimulatorConfig"
        ancestors:
          anyOf:
            - items:
                type: string
              type: array
            -
              type: "null"
          title: Ancestors
        enabled:
          anyOf:
            -
              type: boolean
            -
              type: "null"
          title: Enabled
          default: false
        simType:
          type: string
          title: Simtype
        jobName:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Jobname
        internalAppPort:
          anyOf:
            -
              type: integer
            -
              type: "null"
          title: Internalappport
        supportedProviders:
          anyOf:
            - items:
                type: string
              type: array
            -
              type: "null"
          title: Supportedproviders
      type: object
      required:
        - name
        - config
        - simType
      title: CreateSimulatorRequest

    CreateSnapshotRequest:
      properties:
        service:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Service
        git_hash:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Git Hash
        dataset:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Dataset
        notes:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Notes
        flows:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Flows
        plato_config:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Plato Config
        internal_app_port:
          anyOf:
            -
              type: integer
            -
              type: "null"
          title: Internal App Port
        messaging_port:
          anyOf:
            -
              type: integer
            -
              type: "null"
          title: Messaging Port
      type: object
      title: CreateSnapshotRequest
      description: Request to create a VM snapshot with optional labeling.

    CreateSnapshotResponse:
      properties:
        artifact_id:
          type: string
          title: Artifact Id
        status:
          type: string
          title: Status
        timestamp:
          type: string
          title: Timestamp
        correlation_id:
          type: string
          title: Correlation Id
        s3_uri:
          type: string
          title: S3 Uri
      type: object
      required:
        - artifact_id
        - status
        - timestamp
        - correlation_id
        - s3_uri
      title: CreateSnapshotResponse
      description: Response from creating a VM snapshot.

    CreateVMRequest:
      properties:
        service:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Service
          description: Service name
        dataset:
          type: string
          title: Dataset
          description: Dataset name
        plato_dataset_config:
          $ref: "#/components/schemas/SimConfigDataset"
          description: Dataset config for templating
        request_timeout:
          type: integer
          maximum: 1200.0
          minimum: 60.0
          title: Request Timeout
          description: Request timeout in seconds
          default: 600
        artifact_id:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Artifact Id
          description: Artifact ID for the VM
        alias:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Alias
          description: Optional alias for the VM
        sandbox_timeout:
          type: integer
          maximum: 7200.0
          minimum: 600.0
          title: Sandbox Timeout
          description: Max amount of time the sandbox will be available for
          default: 7200
      type: object
      required:
        - dataset
        - plato_dataset_config
      title: CreateVMRequest

    CreateVMResponse:
      properties:
        status:
          type: string
          title: Status
          description: Status
        timestamp:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Timestamp
          description: Timestamp
        correlation_id:
          type: string
          title: Correlation Id
          description: Correlation ID for tracking
        url:
          type: string
          title: Url
          description: Public URL for the VM
        job_public_id:
          type: string
          title: Job Public Id
          description: Public job ID
        job_group_id:
          type: string
          title: Job Group Id
          description: Job group ID
      type: object
      required:
        - status
        - correlation_id
        - url
        - job_public_id
        - job_group_id
      title: CreateVMResponse

    DbConfigResponse:
      properties:
        db_type:
          type: string
          title: Db Type
        db_port:
          type: integer
          title: Db Port
        db_user:
          type: string
          title: Db User
        db_password:
          type: string
          title: Db Password
        db_database:
          type: string
          title: Db Database
      type: object
      required:
        - db_type
        - db_port
        - db_user
        - db_password
        - db_database
      title: DbConfigResponse
      description: Database configuration from plato config

    EnvStateResponse:
      additionalProperties: true
      type: object

    EvaluateRequest:
      properties:
        value:
          anyOf:
            -
              additionalProperties: true
              type: object
            -
              type: "null"
          title: Value
      type: object
      title: EvaluateRequest
      description: Request model for the evaluate endpoint.

    EvaluateResponse:
      additionalProperties: true
      type: object

    GiteaCredentialsResponse:
      additionalProperties: true
      type: object

    GiteaInfoResponse:
      additionalProperties: true
      type: object

    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: "#/components/schemas/ValidationError"
          type: array
          title: Detail
      type: object
      title: HTTPValidationError

    HeartbeatResponse:
      additionalProperties: true
      type: object

    JobStatusResponse:
      properties:
        status:
          type: string
          title: Status
        status_reason:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Status Reason
        created_at:
          type: string
          format: date-time
          title: Created At
        updated_at:
          type: string
          format: date-time
          title: Updated At
      type: object
      required:
        - status
        - status_reason
        - created_at
        - updated_at
      title: JobStatusResponse
      description: Response model for job status endpoint.

    LogResponse:
      additionalProperties: true
      type: object

    MakeEnvRequest2:
      properties:
        interface_type:
          type: string
          enum:
            - browser
            - computer
            - noop
          title: Interface Type
        interface_width:
          anyOf:
            -
              type: integer
            -
              type: "null"
          title: Interface Width
        interface_height:
          anyOf:
            -
              type: integer
            -
              type: "null"
          title: Interface Height
        source:
          type: string
          title: Source
        open_page_on_start:
          type: boolean
          title: Open Page On Start
          default: false
        env_id:
          type: string
          title: Env Id
        env_config:
          additionalProperties: true
          type: object
          title: Env Config
        record_network_requests:
          type: boolean
          title: Record Network Requests
          default: false
        record_actions:
          type: boolean
          title: Record Actions
          default: false
        load_chrome_extensions:
          items:
            type: string
          type: array
          title: Load Chrome Extensions
        keepalive:
          type: boolean
          title: Keepalive
          default: false
        alias:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Alias
        fast:
          type: boolean
          title: Fast
          default: false
        version:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Version
        tag:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Tag
        dataset:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Dataset
        artifact_id:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Artifact Id
        timeout:
          type: integer
          title: Timeout
          default: 1800
      type: object
      required:
        - interface_type
        - source
        - env_id
        - env_config
      title: MakeEnvRequest2

    MakeEnvResponse:
      type: object
      required:
        - job_id
      properties:
        job_id:
          type: string
          description: The job ID for the created environment
        status:
          type: string
          description: Current status of the environment

    ProxyUrlResponse:
      additionalProperties: true
      type: object

    RepositoryResponse:
      additionalProperties: true
      type: object

    ResetEnvRequest:
      properties:
        task:
          anyOf:
            -
              $ref: "#/components/schemas/ResetEnvTask"
            -
              type: "null"
        agent_version:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Agent Version
        model:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Model
        source:
          type: string
          title: Source
          default: SDK
        load_browser_state:
          type: boolean
          title: Load Browser State
          default: false
        viewport_width:
          anyOf:
            -
              type: integer
            -
              type: "null"
          title: Viewport Width
        viewport_height:
          anyOf:
            -
              type: integer
            -
              type: "null"
          title: Viewport Height
        test_case_public_id:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Test Case Public Id
        replayed_from_session_id:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Replayed From Session Id
        user_id:
          anyOf:
            -
              type: integer
            -
              type: "null"
          title: User Id
      type: object
      title: ResetEnvRequest

    ResetEnvResponse:
      additionalProperties: true
      type: object

    ResetEnvTask:
      properties:
        prompt:
          type: string
          title: Prompt
        start_url:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Start Url
          default: 
        name:
          type: string
          title: Name
        dataset_name:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Dataset Name
        eval_config:
          anyOf:
            -
              $ref: "#/components/schemas/BaseScoringConfig"
            -
              type: "null"
          default:
            type: human_in_the_loop
      type: object
      required:
        - prompt
        - name
      title: ResetEnvTask

    ScoreRequest:
      properties:
        success:
          type: boolean
          title: Success
        reason:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Reason
          default: 
        agent_version:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Agent Version
          default: 
        mutations:
          anyOf:
            - items:
                additionalProperties: true
                type: object
              type: array
            -
              type: "null"
          title: Mutations
          default: []
      type: object
      required:
        - success
      title: ScoreRequest

    ScoreResponse:
      additionalProperties: true
      type: object

    SetupRootPasswordRequest:
      properties:
        ssh_public_key:
          type: string
          title: Ssh Public Key
          description: SSH public key to add to root user's authorized_keys
        request_timeout:
          type: integer
          maximum: 300.0
          minimum: 10.0
          title: Request Timeout
          description: SSH command timeout in seconds
          default: 60
      type: object
      required:
        - ssh_public_key
      title: SetupRootPasswordRequest

    SetupSandboxRequest:
      properties:
        service:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Service
          description: Service name
        dataset:
          type: string
          title: Dataset
          description: Dataset name
        plato_dataset_config:
          $ref: "#/components/schemas/SimConfigDataset"
          description: Dataset config for templating
        request_timeout:
          type: integer
          maximum: 1200.0
          minimum: 60.0
          title: Request Timeout
          description: Request timeout in seconds
          default: 600
        ssh_password:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Ssh Password
          description: SSH password for plato user (optional)
        ssh_public_key:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Ssh Public Key
          description: SSH public key to add to plato user's authorized_keys (optional)
      type: object
      required:
        - dataset
        - plato_dataset_config
      title: SetupSandboxRequest

    SetupSandboxResponse:
      properties:
        status:
          type: string
          title: Status
          description: Status
        timestamp:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Timestamp
          description: Timestamp
        correlation_id:
          type: string
          title: Correlation Id
          description: Correlation ID for tracking
        ssh_url:
          type: string
          title: Ssh Url
          description: SSH URL for connecting to sandbox
      type: object
      required:
        - status
        - correlation_id
        - ssh_url
      title: SetupSandboxResponse

    SimConfigCompute:
      properties:
        cpus:
          type: integer
          maximum: 8.0
          minimum: 1.0
          title: Cpus
          description: vCPUs
          default: 1
        memory:
          type: integer
          maximum: 16384.0
          minimum: 512.0
          title: Memory
          description: Memory in MB
          default: 2048
        disk:
          type: integer
          maximum: 102400.0
          minimum: 1024.0
          title: Disk
          description: Disk space in MB
          default: 10240
        app_port:
          type: integer
          maximum: 65535.0
          minimum: 0.0
          title: App Port
          description: Application port
          default: 8080
        plato_messaging_port:
          type: integer
          maximum: 65535.0
          minimum: 0.0
          title: Plato Messaging Port
          description: Plato messaging port
          default: 7000
      type: object
      title: SimConfigCompute
      description: Compute resource configuration for a simulator.

    SimConfigDataset:
      properties:
        compute:
          $ref: "#/components/schemas/SimConfigCompute"
          description: Compute configuration
        metadata:
          $ref: "#/components/schemas/SimConfigMetadata"
          description: Metadata configuration
        services:
          anyOf:
            - additionalProperties:
                $ref: "#/components/schemas/SimConfigService"
              type: object
            -
              type: "null"
          title: Services
          description: Services
        listeners:
          anyOf:
            - additionalProperties:
                $ref: "#/components/schemas/SimConfigListener"
              type: object
            -
              type: "null"
          title: Listeners
          description: Listeners
      type: object
      required:
        - compute
        - metadata
        - services
        - listeners
      title: SimConfigDataset
      description: Configuration for a simulator dataset.

    SimConfigListener:
      properties:
        type:
          type: string
          enum:
            - db
            - proxy
            - file
          title: Type
          description: Listener type
      type: object
      required:
        - type
      title: SimConfigListener
      description: Base class for mutation listener configurations.

    SimConfigMetadata:
      properties:
        favicon:
          type: string
          title: Favicon
          description: Favicon URL
          default: "https://plato.so/favicon.ico"
        name:
          type: string
          title: Name
          description: Name
          default: Plato
        description:
          type: string
          title: Description
          description: Description
          default: Plato is a platform for building and running simulations.
        source_code_url:
          type: string
          title: Source Code Url
          description: Source code URL
          default: "https://github.com/plato/plato"
        start_url:
          type: string
          title: Start Url
          description: Start URL
          default: "https://plato.so"
        license:
          type: string
          title: License
          description: License
          default: MIT
        variables:
          items:
            additionalProperties:
              type: string
            type: object
          type: array
          title: Variables
          description: Variables
          default:
            -
              name: PLATO_API_KEY
              value: plato
        flows_path:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Flows Path
          description: Flows path
      type: object
      title: SimConfigMetadata
      description: Metadata configuration for a simulator.

    SimConfigService:
      properties:
        type:
          type: string
          enum:
            - docker-compose
            - docker
          title: Type
          description: Service type
      type: object
      required:
        - type
      title: SimConfigService
      description: Base class for simulator service configurations.

    SimStatusHistory:
      properties:
        timestamp_iso:
          type: string
          title: Timestamp Iso
        old_status:
          type: string
          title: Old Status
        new_status:
          type: string
          title: New Status
        user_id:
          anyOf:
            -
              type: integer
            -
              type: "null"
          title: User Id
      type: object
      required:
        - timestamp_iso
        - old_status
        - new_status
      title: SimStatusHistory

    SimulatorConfig:
      properties:
        type:
          type: string
          enum:
            - proxy
            - docker_app
          title: Type
        cookies:
          anyOf:
            - items:
                $ref: "#/components/schemas/ChromeCookie"
              type: array
            -
              type: "null"
          title: Cookies
        authentication:
          anyOf:
            -
              $ref: "#/components/schemas/Authentication"
            -
              type: "null"
        default_start_path:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Default Start Path
          default: /
        status:
          type: string
          enum:
            - requested
            - in_progress
            - environment_in_progress
            - environment_ready
            - data_in_progress
            - data_ready
            - tasks_in_progress
            - not_started
            - env_in_progress
            - env_review_requested
            - env_approved
            - data_review_requested
            - ready
            - ready-disabled-testing
            - out_of_service
          title: Status
        env_assignees:
          anyOf:
            - items:
                type: integer
              type: array
            -
              type: "null"
          title: Env Assignees
        env_review_assignees:
          anyOf:
            - items:
                type: integer
              type: array
            -
              type: "null"
          title: Env Review Assignees
        data_assignees:
          anyOf:
            - items:
                type: integer
              type: array
            -
              type: "null"
          title: Data Assignees
        data_review_assignees:
          anyOf:
            - items:
                type: integer
              type: array
            -
              type: "null"
          title: Data Review Assignees
        status_history:
          anyOf:
            - items:
                $ref: "#/components/schemas/SimStatusHistory"
              type: array
            -
              type: "null"
          title: Status History
        assigned_user_id:
          anyOf:
            -
              type: integer
            -
              type: "null"
          title: Assigned User Id
        notes:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Notes
      type: object
      required:
        - type
      title: SimulatorConfig

    SimulatorRepositoryResponse:
      additionalProperties: true
      type: object

    SimulatorResponse:
      additionalProperties: true
      type: object

    SimulatorVersionDetails:
      properties:
        artifact_id:
          type: string
          title: Artifact Id
        version:
          type: string
          title: Version
        created_at:
          type: string
          format: date-time
          title: Created At
        worker_image:
          type: string
          title: Worker Image
        ecs_task_definition_arn:
          type: string
          title: Ecs Task Definition Arn
        snapshot_s3_uri:
          type: string
          title: Snapshot S3 Uri
        dataset:
          type: string
          title: Dataset
      type: object
      required:
        - artifact_id
        - version
        - created_at
        - worker_image
        - ecs_task_definition_arn
        - snapshot_s3_uri
        - dataset
      title: SimulatorVersionDetails

    SimulatorVersionsResponse:
      properties:
        simulator_name:
          type: string
          title: Simulator Name
        versions:
          items:
            $ref: "#/components/schemas/SimulatorVersionDetails"
          type: array
          title: Versions
        total_versions:
          type: integer
          title: Total Versions
      type: object
      required:
        - simulator_name
        - versions
        - total_versions
      title: SimulatorVersionsResponse

    VMManagementRequest:
      properties:
        service:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Service
          description: Service name
        dataset:
          type: string
          title: Dataset
          description: Dataset name
        plato_dataset_config:
          $ref: "#/components/schemas/SimConfigDataset"
          description: Dataset config for templating
        request_timeout:
          type: integer
          maximum: 1200.0
          minimum: 60.0
          title: Request Timeout
          description: Request timeout in seconds
          default: 600
      type: object
      required:
        - dataset
        - plato_dataset_config
      title: VMManagementRequest

    VMManagementResponse:
      properties:
        status:
          type: string
          title: Status
          description: Status
        timestamp:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Timestamp
          description: Timestamp
        correlation_id:
          type: string
          title: Correlation Id
          description: Correlation ID for tracking
      type: object
      required:
        - status
        - correlation_id
      title: VMManagementResponse

    ValidationError:
      properties:
        loc:
          items:
            anyOf:
              -
                type: string
              -
                type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
        - loc
        - msg
        - type
      title: ValidationError

    WorkerReadyResponse:
      properties:
        ready:
          type: boolean
          title: Ready
        job_id:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Job Id
        worker_private_ip:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Worker Private Ip
        worker_public_ip:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Worker Public Ip
        mesh_ip:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Mesh Ip
        worker_port:
          anyOf:
            -
              type: integer
            -
              type: "null"
          title: Worker Port
        health_status:
          anyOf:
            -
              additionalProperties: true
              type: object
            -
              type: "null"
          title: Health Status
        error:
          anyOf:
            -
              type: string
            -
              type: "null"
          title: Error
      type: object
      required:
        - ready
      title: WorkerReadyResponse
      description: Response model for worker ready endpoint.

    app__schemas__gitea_responses__SimulatorListItemResponse:
      additionalProperties: true
      type: object

  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-Api-Key
      description: API Key authentication header