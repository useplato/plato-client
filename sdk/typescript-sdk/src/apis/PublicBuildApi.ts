/* tslint:disable */
/* eslint-disable */
/**
 * Plato API
 * API for Plato platform - SDK routes only
 *
 * The version of the OpenAPI document: 1.0.0
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


import * as runtime from '../runtime';
import type {
  CreateSnapshotRequest,
  CreateSnapshotResponse,
  CreateVMRequest,
  CreateVMResponse,
  GetOperationEventsApiPublicBuildEventsCorrelationIdGet200Response,
  HTTPValidationError,
  SetupRootPasswordRequest,
  SetupSandboxRequest,
  SetupSandboxResponse,
  VMManagementRequest,
  VMManagementResponse,
} from '../models/index';
import {
    CreateSnapshotRequestFromJSON,
    CreateSnapshotRequestToJSON,
    CreateSnapshotResponseFromJSON,
    CreateSnapshotResponseToJSON,
    CreateVMRequestFromJSON,
    CreateVMRequestToJSON,
    CreateVMResponseFromJSON,
    CreateVMResponseToJSON,
    GetOperationEventsApiPublicBuildEventsCorrelationIdGet200ResponseFromJSON,
    GetOperationEventsApiPublicBuildEventsCorrelationIdGet200ResponseToJSON,
    HTTPValidationErrorFromJSON,
    HTTPValidationErrorToJSON,
    SetupRootPasswordRequestFromJSON,
    SetupRootPasswordRequestToJSON,
    SetupSandboxRequestFromJSON,
    SetupSandboxRequestToJSON,
    SetupSandboxResponseFromJSON,
    SetupSandboxResponseToJSON,
    VMManagementRequestFromJSON,
    VMManagementRequestToJSON,
    VMManagementResponseFromJSON,
    VMManagementResponseToJSON,
} from '../models/index';

export interface CheckpointVmApiPublicBuildVmPublicIdCheckpointPostRequest {
    publicId: string;
    createSnapshotRequest?: CreateSnapshotRequest;
}

export interface CloseVmApiPublicBuildVmPublicIdDeleteRequest {
    publicId: string;
}

export interface CreateVmApiPublicBuildVmCreatePostRequest {
    createVMRequest: CreateVMRequest;
}

export interface GetOperationEventsApiPublicBuildEventsCorrelationIdGetRequest {
    correlationId: string;
}

export interface SaveVmSnapshotApiPublicBuildVmPublicIdSnapshotPostRequest {
    publicId: string;
    createSnapshotRequest?: CreateSnapshotRequest;
}

export interface SetupRootAccessApiPublicBuildVmPublicIdSetupRootAccessPostRequest {
    publicId: string;
    setupRootPasswordRequest: SetupRootPasswordRequest;
}

export interface SetupSandboxApiPublicBuildVmPublicIdSetupSandboxPostRequest {
    publicId: string;
    setupSandboxRequest: SetupSandboxRequest;
}

export interface StartWorkerApiPublicBuildVmPublicIdStartWorkerPostRequest {
    publicId: string;
    vMManagementRequest: VMManagementRequest;
}

/**
 * 
 */
export class PublicBuildApi extends runtime.BaseAPI {

    /**
     * Create a checkpoint snapshot of a VM.  This creates a blockdiff_checkpoint artifact type instead of a regular blockdiff. Optional parameters allow overriding artifact labels: - service: Simulator name (defaults to job\'s service) - git_hash: Git hash/version (defaults to job\'s version or \"unknown\") - dataset: Dataset name (defaults to job\'s dataset) 
     * Checkpoint Vm
     */
    async checkpointVmApiPublicBuildVmPublicIdCheckpointPostRaw(requestParameters: CheckpointVmApiPublicBuildVmPublicIdCheckpointPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<CreateSnapshotResponse>> {
        if (requestParameters['publicId'] == null) {
            throw new runtime.RequiredError(
                'publicId',
                'Required parameter "publicId" was null or undefined when calling checkpointVmApiPublicBuildVmPublicIdCheckpointPost().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.apiKey) {
            headerParameters["X-Api-Key"] = await this.configuration.apiKey("X-Api-Key"); // ApiKeyAuth authentication
        }


        let urlPath = `/public-build/vm/{public_id}/checkpoint`;
        urlPath = urlPath.replace(`{${"public_id"}}`, encodeURIComponent(String(requestParameters['publicId'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: CreateSnapshotRequestToJSON(requestParameters['createSnapshotRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => CreateSnapshotResponseFromJSON(jsonValue));
    }

    /**
     * Create a checkpoint snapshot of a VM.  This creates a blockdiff_checkpoint artifact type instead of a regular blockdiff. Optional parameters allow overriding artifact labels: - service: Simulator name (defaults to job\'s service) - git_hash: Git hash/version (defaults to job\'s version or \"unknown\") - dataset: Dataset name (defaults to job\'s dataset) 
     * Checkpoint Vm
     */
    async checkpointVmApiPublicBuildVmPublicIdCheckpointPost(requestParameters: CheckpointVmApiPublicBuildVmPublicIdCheckpointPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<CreateSnapshotResponse> {
        const response = await this.checkpointVmApiPublicBuildVmPublicIdCheckpointPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Close and terminate a VM.
     * Close Vm
     */
    async closeVmApiPublicBuildVmPublicIdDeleteRaw(requestParameters: CloseVmApiPublicBuildVmPublicIdDeleteRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<VMManagementResponse>> {
        if (requestParameters['publicId'] == null) {
            throw new runtime.RequiredError(
                'publicId',
                'Required parameter "publicId" was null or undefined when calling closeVmApiPublicBuildVmPublicIdDelete().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.apiKey) {
            headerParameters["X-Api-Key"] = await this.configuration.apiKey("X-Api-Key"); // ApiKeyAuth authentication
        }


        let urlPath = `/public-build/vm/{public_id}`;
        urlPath = urlPath.replace(`{${"public_id"}}`, encodeURIComponent(String(requestParameters['publicId'])));

        const response = await this.request({
            path: urlPath,
            method: 'DELETE',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => VMManagementResponseFromJSON(jsonValue));
    }

    /**
     * Close and terminate a VM.
     * Close Vm
     */
    async closeVmApiPublicBuildVmPublicIdDelete(requestParameters: CloseVmApiPublicBuildVmPublicIdDeleteRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<VMManagementResponse> {
        const response = await this.closeVmApiPublicBuildVmPublicIdDeleteRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Create Vm
     */
    async createVmApiPublicBuildVmCreatePostRaw(requestParameters: CreateVmApiPublicBuildVmCreatePostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<CreateVMResponse>> {
        if (requestParameters['createVMRequest'] == null) {
            throw new runtime.RequiredError(
                'createVMRequest',
                'Required parameter "createVMRequest" was null or undefined when calling createVmApiPublicBuildVmCreatePost().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.apiKey) {
            headerParameters["X-Api-Key"] = await this.configuration.apiKey("X-Api-Key"); // ApiKeyAuth authentication
        }


        let urlPath = `/public-build/vm/create`;

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: CreateVMRequestToJSON(requestParameters['createVMRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => CreateVMResponseFromJSON(jsonValue));
    }

    /**
     * Create Vm
     */
    async createVmApiPublicBuildVmCreatePost(requestParameters: CreateVmApiPublicBuildVmCreatePostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<CreateVMResponse> {
        const response = await this.createVmApiPublicBuildVmCreatePostRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Stream operation results via Server-Sent Events (SSE) for public usage.  Returns a stream of events with the following format: - event: Event type (e.g., \"connected\", \"progress\", \"complete\", \"error\") - data: JSON payload with event details  Events: - connected: Initial connection established - progress: Operation progress update - complete: Operation completed successfully - error: Operation failed with error details 
     * Get Operation Events
     */
    async getOperationEventsApiPublicBuildEventsCorrelationIdGetRaw(requestParameters: GetOperationEventsApiPublicBuildEventsCorrelationIdGetRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<GetOperationEventsApiPublicBuildEventsCorrelationIdGet200Response>> {
        if (requestParameters['correlationId'] == null) {
            throw new runtime.RequiredError(
                'correlationId',
                'Required parameter "correlationId" was null or undefined when calling getOperationEventsApiPublicBuildEventsCorrelationIdGet().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        if (this.configuration && this.configuration.apiKey) {
            headerParameters["X-Api-Key"] = await this.configuration.apiKey("X-Api-Key"); // ApiKeyAuth authentication
        }


        let urlPath = `/public-build/events/{correlation_id}`;
        urlPath = urlPath.replace(`{${"correlation_id"}}`, encodeURIComponent(String(requestParameters['correlationId'])));

        const response = await this.request({
            path: urlPath,
            method: 'GET',
            headers: headerParameters,
            query: queryParameters,
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => GetOperationEventsApiPublicBuildEventsCorrelationIdGet200ResponseFromJSON(jsonValue));
    }

    /**
     * Stream operation results via Server-Sent Events (SSE) for public usage.  Returns a stream of events with the following format: - event: Event type (e.g., \"connected\", \"progress\", \"complete\", \"error\") - data: JSON payload with event details  Events: - connected: Initial connection established - progress: Operation progress update - complete: Operation completed successfully - error: Operation failed with error details 
     * Get Operation Events
     */
    async getOperationEventsApiPublicBuildEventsCorrelationIdGet(requestParameters: GetOperationEventsApiPublicBuildEventsCorrelationIdGetRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<GetOperationEventsApiPublicBuildEventsCorrelationIdGet200Response> {
        const response = await this.getOperationEventsApiPublicBuildEventsCorrelationIdGetRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Save a snapshot of a VM.  Optional parameters allow overriding artifact labels: - service: Simulator name (defaults to job\'s service) - git_hash: Git hash/version (defaults to job\'s version or \"unknown\") - dataset: Dataset name (defaults to job\'s dataset) 
     * Save Vm Snapshot
     */
    async saveVmSnapshotApiPublicBuildVmPublicIdSnapshotPostRaw(requestParameters: SaveVmSnapshotApiPublicBuildVmPublicIdSnapshotPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<CreateSnapshotResponse>> {
        if (requestParameters['publicId'] == null) {
            throw new runtime.RequiredError(
                'publicId',
                'Required parameter "publicId" was null or undefined when calling saveVmSnapshotApiPublicBuildVmPublicIdSnapshotPost().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.apiKey) {
            headerParameters["X-Api-Key"] = await this.configuration.apiKey("X-Api-Key"); // ApiKeyAuth authentication
        }


        let urlPath = `/public-build/vm/{public_id}/snapshot`;
        urlPath = urlPath.replace(`{${"public_id"}}`, encodeURIComponent(String(requestParameters['publicId'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: CreateSnapshotRequestToJSON(requestParameters['createSnapshotRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => CreateSnapshotResponseFromJSON(jsonValue));
    }

    /**
     * Save a snapshot of a VM.  Optional parameters allow overriding artifact labels: - service: Simulator name (defaults to job\'s service) - git_hash: Git hash/version (defaults to job\'s version or \"unknown\") - dataset: Dataset name (defaults to job\'s dataset) 
     * Save Vm Snapshot
     */
    async saveVmSnapshotApiPublicBuildVmPublicIdSnapshotPost(requestParameters: SaveVmSnapshotApiPublicBuildVmPublicIdSnapshotPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<CreateSnapshotResponse> {
        const response = await this.saveVmSnapshotApiPublicBuildVmPublicIdSnapshotPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Setup SSH key-based authentication for the root user.
     * Setup Root Access
     */
    async setupRootAccessApiPublicBuildVmPublicIdSetupRootAccessPostRaw(requestParameters: SetupRootAccessApiPublicBuildVmPublicIdSetupRootAccessPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<VMManagementResponse>> {
        if (requestParameters['publicId'] == null) {
            throw new runtime.RequiredError(
                'publicId',
                'Required parameter "publicId" was null or undefined when calling setupRootAccessApiPublicBuildVmPublicIdSetupRootAccessPost().'
            );
        }

        if (requestParameters['setupRootPasswordRequest'] == null) {
            throw new runtime.RequiredError(
                'setupRootPasswordRequest',
                'Required parameter "setupRootPasswordRequest" was null or undefined when calling setupRootAccessApiPublicBuildVmPublicIdSetupRootAccessPost().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.apiKey) {
            headerParameters["X-Api-Key"] = await this.configuration.apiKey("X-Api-Key"); // ApiKeyAuth authentication
        }


        let urlPath = `/public-build/vm/{public_id}/setup-root-access`;
        urlPath = urlPath.replace(`{${"public_id"}}`, encodeURIComponent(String(requestParameters['publicId'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: SetupRootPasswordRequestToJSON(requestParameters['setupRootPasswordRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => VMManagementResponseFromJSON(jsonValue));
    }

    /**
     * Setup SSH key-based authentication for the root user.
     * Setup Root Access
     */
    async setupRootAccessApiPublicBuildVmPublicIdSetupRootAccessPost(requestParameters: SetupRootAccessApiPublicBuildVmPublicIdSetupRootAccessPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<VMManagementResponse> {
        const response = await this.setupRootAccessApiPublicBuildVmPublicIdSetupRootAccessPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Setup sandbox development environment with git clone.
     * Setup Sandbox
     */
    async setupSandboxApiPublicBuildVmPublicIdSetupSandboxPostRaw(requestParameters: SetupSandboxApiPublicBuildVmPublicIdSetupSandboxPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<SetupSandboxResponse>> {
        if (requestParameters['publicId'] == null) {
            throw new runtime.RequiredError(
                'publicId',
                'Required parameter "publicId" was null or undefined when calling setupSandboxApiPublicBuildVmPublicIdSetupSandboxPost().'
            );
        }

        if (requestParameters['setupSandboxRequest'] == null) {
            throw new runtime.RequiredError(
                'setupSandboxRequest',
                'Required parameter "setupSandboxRequest" was null or undefined when calling setupSandboxApiPublicBuildVmPublicIdSetupSandboxPost().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.apiKey) {
            headerParameters["X-Api-Key"] = await this.configuration.apiKey("X-Api-Key"); // ApiKeyAuth authentication
        }


        let urlPath = `/public-build/vm/{public_id}/setup-sandbox`;
        urlPath = urlPath.replace(`{${"public_id"}}`, encodeURIComponent(String(requestParameters['publicId'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: SetupSandboxRequestToJSON(requestParameters['setupSandboxRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => SetupSandboxResponseFromJSON(jsonValue));
    }

    /**
     * Setup sandbox development environment with git clone.
     * Setup Sandbox
     */
    async setupSandboxApiPublicBuildVmPublicIdSetupSandboxPost(requestParameters: SetupSandboxApiPublicBuildVmPublicIdSetupSandboxPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<SetupSandboxResponse> {
        const response = await this.setupSandboxApiPublicBuildVmPublicIdSetupSandboxPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

    /**
     * Start listeners: write env.py and worker compose from dataset config, then restart worker.
     * Start Worker
     */
    async startWorkerApiPublicBuildVmPublicIdStartWorkerPostRaw(requestParameters: StartWorkerApiPublicBuildVmPublicIdStartWorkerPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<runtime.ApiResponse<VMManagementResponse>> {
        if (requestParameters['publicId'] == null) {
            throw new runtime.RequiredError(
                'publicId',
                'Required parameter "publicId" was null or undefined when calling startWorkerApiPublicBuildVmPublicIdStartWorkerPost().'
            );
        }

        if (requestParameters['vMManagementRequest'] == null) {
            throw new runtime.RequiredError(
                'vMManagementRequest',
                'Required parameter "vMManagementRequest" was null or undefined when calling startWorkerApiPublicBuildVmPublicIdStartWorkerPost().'
            );
        }

        const queryParameters: any = {};

        const headerParameters: runtime.HTTPHeaders = {};

        headerParameters['Content-Type'] = 'application/json';

        if (this.configuration && this.configuration.apiKey) {
            headerParameters["X-Api-Key"] = await this.configuration.apiKey("X-Api-Key"); // ApiKeyAuth authentication
        }


        let urlPath = `/public-build/vm/{public_id}/start-worker`;
        urlPath = urlPath.replace(`{${"public_id"}}`, encodeURIComponent(String(requestParameters['publicId'])));

        const response = await this.request({
            path: urlPath,
            method: 'POST',
            headers: headerParameters,
            query: queryParameters,
            body: VMManagementRequestToJSON(requestParameters['vMManagementRequest']),
        }, initOverrides);

        return new runtime.JSONApiResponse(response, (jsonValue) => VMManagementResponseFromJSON(jsonValue));
    }

    /**
     * Start listeners: write env.py and worker compose from dataset config, then restart worker.
     * Start Worker
     */
    async startWorkerApiPublicBuildVmPublicIdStartWorkerPost(requestParameters: StartWorkerApiPublicBuildVmPublicIdStartWorkerPostRequest, initOverrides?: RequestInit | runtime.InitOverrideFunction): Promise<VMManagementResponse> {
        const response = await this.startWorkerApiPublicBuildVmPublicIdStartWorkerPostRaw(requestParameters, initOverrides);
        return await response.value();
    }

}
